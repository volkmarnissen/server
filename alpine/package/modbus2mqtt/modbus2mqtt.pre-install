#!/bin/sh

# Create modbus2mqtt user with dialout as primary group for serial port access
# Use fixed UID 1000 for predictable file permissions with Docker volume mounts
# Create actual home directory for git operations
adduser -S -D -u 1000 -h /var/lib/modbus2mqtt -s /sbin/nologin -G dialout -g modbus2mqtt modbus2mqtt 2>/dev/null
mkdir -p /var/lib/modbus2mqtt/.config/git
chown -R modbus2mqtt:dialout /var/lib/modbus2mqtt

exit 0